div#drilldown-header {
  @include media-breakpoint-up(md) {

  }
  @include media-breakpoint-up(lg) {

  }
  display: flex;
  flex-wrap: wrap;
  margin-bottom: 20px;
  font-size: 0 !important;
  opacity: 0;
  transition: opacity 300ms ease-in-out;

  * {
    display: none;
  }

  .drilldown-header-value {
    display: inline-block;
    margin-bottom: 20px;
    padding: 2px 25px 0 15px;
    font-size: rem-calc(15);
    line-height: 45px;
    color: $te-blue;
    background-color: $te-white;
    max-width: calc(100% - 15px);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;

    @include media-breakpoint-up(md) {
      padding-right: 30px;
    }


    ~ a {
      display: inline-flex;
      justify-content: center;
      align-items: center;
      width: 25px;
      margin-right: -10px;
      margin-bottom: 20px;
      transform: translateX(-100%);
      font-size: rem-calc(16);
      color: $te-black;
      background-color: $te-white;
      background-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 10 10\'%3E%3Cdefs%3E%3Cfilter id=\'a\'%3E%3CfeColorMatrix in=\'SourceGraphic\' values=\'0 0 0 0 0.338841 0 0 0 0 0.488169 0 0 0 0 0.514521 0 0 0 1.000000 0\'/%3E%3C/filter%3E%3C/defs%3E%3Cg fill=\'none\' fill-rule=\'evenodd\' filter=\'url(%23a)\'%3E%3Cg fill=\'%23000\'%3E%3Cpath d=\'M.5197 8.6934l8.397-8.397L9.927 1.3066 1.53 9.7036z\'/%3E%3Cpath d=\'M1.5299.2964l8.397 8.397-1.0102 1.0102-8.397-8.397z\'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');
      background-repeat: no-repeat;
      background-position: center center;
      background-size: 10px;

      &:hover {
        background-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 10 10\'%3E%3Cdefs%3E%3Cfilter id=\'a\'%3E%3CfeColorMatrix in=\'SourceGraphic\' values=\'0 0 0 0 0.054645 0 0 0 0 0.056245 0 0 0 0 0.056527 0 0 0 1.000000 0\'/%3E%3C/filter%3E%3C/defs%3E%3Cg fill=\'none\' fill-rule=\'evenodd\' filter=\'url(%23a)\'%3E%3Cpath fill=\'%23000\' d=\'M8.9168.2964l1.0101 1.0102-3.6932 3.6938 3.6932 3.693-1.0101 1.0102-3.693-3.6932-3.694 3.6932-1.01-1.0102 3.694-3.693-3.694-3.6938 1.01-1.0102 3.694 3.694 3.693-3.694z\'/%3E%3C/g%3E%3C/svg%3E');
      }

      img {
        display: none;
      }
    }
  }

  a {
    display: inline-flex;
  }
}

div#drilldown-header + p {
  display: none;
}

div.drilldown-filters {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-end;
  opacity: 0;

  // Drilldown filter on guides filter page

  .page-Special_BrowseData_Instruction &,
  .page-Instructions &{

    .drilldown-filter-label {
      font-family: $te-font-bold;
      color: $te-black;
    }

    @include media-breakpoint-up(lg) {

      .drilldown-filter {
        background-repeat: no-repeat;
        background-position: left top;
        background-size: 50px;
        padding-top: 5px;
      }

      [data-filter-name="Method"] {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 31.47 45.75'%3E%3Cdefs%3E%3Cmask id='a' x='0' y='0' width='31.47' height='45.75' maskUnits='userSpaceOnUse'%3E%3Cpath fill-rule='evenodd' fill='%23fff' d='M0 0h31.46v45.75H0V0z'/%3E%3C/mask%3E%3C/defs%3E%3Cg data-name='Layer 2'%3E%3Cg data-name='Layer 1'%3E%3Cg mask='url(%23a)' data-name='00---ICONS'%3E%3Cpath d='M16.32 0A15.73 15.73 0 003 24.92l.55.76C5.23 28 5.94 29 6.15 31.87l.69 8h15.37v2.52H7.66v3.37h17.83l.14-9.26h-8.21v-15l4.64-2.86-1.77-2.87-4.53 2.8-4.27-2.77-1.83 2.76 4.39 2.86v15.07H9.93l-.42-4.89c-.28-3.8-1.41-5.35-3.28-7.91L5.7 23A12.35 12.35 0 017.16 6.83a12.23 12.23 0 019-3.45A12.49 12.49 0 0128.1 15.69a12.22 12.22 0 01-2.17 7c-.41.61-.8 1.12-1.17 1.61A11 11 0 0022 31l-.2 2.72 3.36.25.2-2.72c.17-2.3.82-3.16 2.1-4.88.37-.49.79-1.06 1.25-1.72a15.69 15.69 0 002.76-8.95A15.89 15.89 0 0016.32 0' fill-rule='evenodd'/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        background-size: 35px;
        padding-top: 50px;
      }

      [data-filter-name="For whom is this important?"] {
        background-image: url("data:image/svg+xml,%3Csvg width='32' height='40' viewBox='0 0 32 40' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cdefs%3E%3Cpath id='a' d='M0 .284h31.837v15.1044H0z'/%3E%3C/defs%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cpath d='M16.919 21.626c-5.9622 0-10.8125-4.8504-10.8125-10.8127 0-1.1566.1817-2.2959.541-3.3855L9.9477 8.515c-.2432.7381-.3663 1.5115-.3663 2.2983 0 4.0462 3.2916 7.3378 7.3378 7.3378s7.3378-3.2916 7.3378-7.3378c0-4.0467-3.2916-7.3383-7.3378-7.3383H9.1703V.0002h7.7488c5.9623 0 10.8126 4.8503 10.8126 10.8131 0 5.9623-4.8503 10.8126-10.8126 10.8126' fill='%23000'/%3E%3Cg transform='translate(0 23.6857)'%3E%3Cmask id='b' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3C/mask%3E%3Cpath d='M5.785 15.3884H-.0001v-3.4748h3.1953L5.853 3.0052C6.3305 1.4028 7.832.284 9.5035.284h15.3274c1.6714 0 3.173 1.119 3.651 2.7208l3.3552 11.1934-3.3284.9972L25.153 4.0005a.3346.3346 0 00-.3221-.2418H9.5035a.3325.3325 0 00-.3207.2393L5.785 15.3884z' fill='%23000' mask='url(%23b)'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        background-size: 35px;
        padding-top: 50px;
      }

      [data-filter-name="Duration"] {
        background-image: url("data:image/svg+xml,%3Csvg width='43' height='40' viewBox='0 0 43 40' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cdefs%3E%3Cpath id='a' d='M0 .1167h42.6869v38.5467H0z'/%3E%3C/defs%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cpath d='M19.8333 9.5946V20.089c0 2.4496 1.9862 4.4352 4.4358 4.4352h6.0083V20.722h-4.7412c-.6999 0-1.2671-.5673-1.2671-1.2665V9.5946h-4.4358z' fill='%23000'/%3E%3Cg transform='translate(0 .4357)'%3E%3Cmask id='b' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3C/mask%3E%3Cpath d='M23.4132.1167c-8.4623 0-15.6664 5.4824-18.2508 13.082l4.3005 1.072C11.098 8.2863 16.678 3.919 23.4132 3.919c8.5313 0 14.8379 6.94 14.8379 15.4714 0 8.5308-6.3066 15.4709-14.8379 15.4709-8.2298 0-14.3436-6.4595-14.8097-14.5744H-.0003v3.8017h4.7236c2.1028 8.3634 9.683 14.575 18.6899 14.575 10.6275 0 19.2737-8.6463 19.2737-19.2732 0-10.628-8.6462-19.2736-19.2737-19.2736' fill='%23000' mask='url(%23b)'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        background-size: 45px;
        padding-top: 50px;
      }

      [data-filter-name="Participants"] {
        background-image: url("data:image/svg+xml,%3Csvg width='50' height='45' viewBox='0 0 50 45' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cdefs%3E%3Cpath id='a' d='M.017.482h45.58v23.1835H.017z'/%3E%3Cpath id='c' d='M.1193.3087H30.072V19.518H.1193z'/%3E%3C/defs%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg transform='translate(2.1687 .06)'%3E%3Cmask id='b' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3C/mask%3E%3Cpath d='M22.8097 4.277c4.2994 0 7.7964 3.4975 7.7964 7.797 0 4.2993-3.497 7.7963-7.7964 7.7963s-7.7963-3.497-7.7963-7.7964 3.497-7.7969 7.7963-7.7969M8.3664 23.6655c.9976 0 2.0065-.179 2.971-.5481L9.982 19.572c-1.6698.6398-3.5729.2332-4.8415-1.03-1.7724-1.773-1.7724-4.6627 0-6.4362 1.6644-1.6585 4.294-1.767 6.0831-.3144-.0054.0927-.0054.1903-.0054.2824 0 6.3922 5.1994 11.5916 11.5915 11.5916 6.3922 0 11.5916-5.1994 11.5916-11.5916 0-.0921 0-.1897-.0054-.2824 1.7891-1.4525 4.4187-1.344 6.0777.3144 1.7729 1.7735 1.7729 4.6632 0 6.4361-1.2633 1.2633-3.1663 1.6699-4.8361 1.0301l-1.3555 3.5453a8.2833 8.2833 0 002.9657.5481c2.1795 0 4.3157-.8517 5.9096-2.4398 3.253-3.253 3.253-8.5505 0-11.8035-2.5807-2.5807-6.4518-3.1175-9.5633-1.5934-1.6975-4.2994-5.8885-7.347-10.7843-7.347-4.8952 0-9.0867 3.0476-10.7837 7.347C8.914 6.31 5.043 6.8415 2.4567 9.4222c-3.253 3.253-3.253 8.5505 0 11.8035 1.594 1.588 3.7356 2.4398 5.9097 2.4398' fill='%23000' mask='url(%23b)'/%3E%3C/g%3E%3Cpath fill='%23000' d='M11.1573 27.9156H4.0576L.0001 37.8774l3.5143 1.4318 3.0952-7.5985h4.5477z'/%3E%3Cg transform='translate(9.759 24.9998)'%3E%3Cmask id='d' fill='%23fff'%3E%3Cuse xlink:href='%23c'/%3E%3C/mask%3E%3Cpath d='M21.4575.3087H8.9578a3.9213 3.9213 0 00-3.7242 2.6826L.1193 18.3163l3.6 1.202 5.1149-15.325a.1294.1294 0 01.1236-.0895h12.4997c.0569 0 .1068.0369.1241.0911l4.8741 15.2984 3.6163-1.1521-4.8747-15.299C24.6763 1.4072 23.173.3088 21.4575.3088' fill='%23000' mask='url(%23d)'/%3E%3C/g%3E%3Cpath fill='%23000' d='M45.897 27.9156h-7.0998v3.7951h4.5477l3.0953 7.5985 3.5143-1.4318z'/%3E%3C/g%3E%3C/svg%3E");
        background-size: 45px;
        padding-top: 50px;
      }

    }

  }

}

div.drilldown-filter {

  @include media-breakpoint-up(md) {
    display: block;
    max-width: calc(50% - 15px);
    margin-right: 15px;

    &:nth-child(even) {
      max-width: 50%;
      margin-right: 0;
    }

    // added to hide filters
    &:nth-child(n+6) {
      display: none;
    }
  }
  @include media-breakpoint-up(lg) {
    max-width: calc(30%);

    &:nth-child(even) {
      max-width: 30%;
      margin-right: 15px;
    }
  }
  @include media-breakpoint-up(xl) {
    max-width: calc(25% - 15px);

    &:nth-child(even) {
      max-width: calc(25% - 15px);
      margin-right: 15px;
    }
  }
  display: none;
  width: 100%;

  .drilldown-filter-values {
    margin-right: 15px;
    form {
      position: relative;
      display: flex;
      align-items: center;
      width: 100%;

      // submit button
      input[type='submit'] {
        width: 60px;
        height: 60px;
        margin-top: 8px !important;
        margin-left: 20px;
        font-size: 0;
        border: 0;
        background-color: $te-lightblue;
        background-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 19 18\'%3E%3Cpath fill=\'%23000\' fill-rule=\'evenodd\' d=\'M15.3912 16.1264l-3.328-4.1323h.0002l-1.1031-1.37c-.9708 1.0635-2.365 1.7225-3.9045 1.7225a5.445 5.445 0 01-.577-.031c-1.4071-.1519-2.671-.8426-3.5588-1.945-.8876-1.1024-1.293-2.4844-1.1411-3.8916.2908-2.6975 2.552-4.7315 5.2597-4.7315.191 0 .3852.0107.5767.0315 2.905.313 5.0136 2.9314 4.7002 5.8364-.047.4364-.1507.853-.2945 1.249l1.4822 1.0062a7.0388 7.0388 0 00.55-2.0678c.417-3.8693-2.3813-7.3441-6.2503-7.7614a7.1198 7.1198 0 00-.7643-.0415C3.4858-.0001.4309 2.679.0413 6.2916c-.4174 3.869 2.381 7.3443 6.2502 7.7616.2568.0275.512.041.7643.041 1.342 0 2.612-.3835 3.6948-1.0543l3.839 4.7668.0002-.0004v.0004h4.2999v-1.6803h-3.4985z\'/%3E%3C/svg%3E');
        background-repeat: no-repeat;
        background-position: center center;
        background-size: 19px 18px;

        &:focus {
          outline: none;
        }
      }
    }

    form .ui-widget {
      float: none;
      width: calc(100% - 60px);
      margin-right: 10px;

      button {
        position: absolute;
        top: 0;
        right: 60px;
        height: 100%;
        border: 0;
        background-color: transparent;
        background-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 9 6\'%3E%3Cpath fill=\'%23567C83\' fill-rule=\'nonzero\' d=\'M9 1.6364L4.5 6 2.8125 4.3636 0 1.6364 1.6875 0 4.5 2.727 7.3125 0 9 1.6364z\'/%3E%3C/svg%3E');
        background-repeat: no-repeat;
        background-position: left center;
        background-size: 9px 6px;
      }
    }

    form input.ui-widget-content {
      float: none;
      width: 100%;
      font-family: $font-family-base;
      font-size: rem-calc(18);
      line-height: unitless-calc(30, 18);
      color: $te-blue;
      border: 2px solid $te-lightblue;
      border-radius: 0;
      background: rgba($te-verylightblue, 0.3);
      padding: 13px 10px;

      &:focus {
        border: solid 1px $te-blue;
        border-radius: 0;
        outline: none;
      }
    }
  }
}

div.drilldown-filter-label {
  font-family: $font-family-base;
  font-size: rem-calc(18);
  font-style: normal;
  line-height: unitless-calc(30, 18);
  color: $te-blue;
  margin-top: 5px;

  .is-applied &{
    font-style: normal;
  }

}

// visible state
div#drilldown-header,
div.drilldown-filters {
  &.is-visible {
    opacity: 1;
  }
}

// Styles for UI autocomplete
div.drilldown-filters .drilldown-filter-values form .ui-autocomplete-input {
  padding-right: 30px;

  &:focus {
    //background-color: $te-white;
  }

  // Hide the arrow link dropdownbutton
  &:focus ~ button {
    transform: scaleY(-1);
  }
}

// Styles from UI dropdown
ul.ui-menu {
  transform: translateY(-1px);
  border: 1px solid $te-lightblue;
  background: $te-verylightblue;
}

ul.ui-menu .ui-menu-item {
  font-family: $font-family-base;
  font-size: rem-calc(18);
  font-style: normal;
  line-height: unitless-calc(30, 18);
  color: $te-black;
  background: $te-verylightblue;

  a {
    padding: 7px 4px !important;
    font-family: $font-family-base;
    font-size: rem-calc(18) !important;
    line-height: unitless-calc(30, 18) !important;
    color: $te-black;

    &:empty {
      display: none;
    }
  }

  strong {
    font-family: $font-headings-bold;
  }

  .ui-state-focus,
  .ui-state-active {
    color: $te-black;
    border: 0;
    background: $te-lightblue;
    margin: 0 !important;
  }
}


// Styles for see more button
.drilldown-seeMore-checkbox {
  position: absolute;
  display: none;

  &:checked ~ .drilldown-filter {
    display: block;
  }

  &:checked ~ .drilldown-seeMore {
    display: none;
  }
}

.drilldown-seeMore {
  display: block;
  width: 100%;
  user-select: none;
  color: $te-blue;
  outline: none;
  background: rgba($te-homepage-background, .2);
  border: 1px solid $te-boticelli;
  text-align: center;
  margin-bottom: 0;


  @include media-breakpoint-up(md) {
    align-items: flex-end;
    margin-bottom: -25px;
    border: none;
    text-align: left;
    margin-left: 1px;
  }

  &:hover {

    border-color: $te-blue;
    text-decoration: none;

    label {
      cursor: pointer;
      text-decoration: none;
    }

  }

  label {
    font-family: $te-font-regular;
    color: $te-blue;
    display: block;
    width: 100%;
    font-size: 0;
    margin: 0;
    padding: 10px 0;

    &:hover {
      color: $te-blue;
    }


    @include media-breakpoint-up(md) {
      font-family: $te-font-bold;
      color: $te-black;
      width: 250px;
      margin: 5px 0 0;
      padding: 0;
      text-decoration: underline;

      &:hover {
        color: $te-black;
      }

    }

    &::before {


      @include media-breakpoint-up(md) {
        font-size: rem-calc(16);
        line-height: unitless-calc(24,16);
        content: 'More filters';
        background-image: url("data:image/svg+xml,%3Csvg width='9' height='9' viewBox='0 0 9 9' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.3834 5.5886v3.3628H3.3646V5.5886h-.0198v-.0018H0V3.568h3.3448V.2052h2.0188V3.568h.0198v.0018h3.3448v2.0188z' fill='%23000' fill-rule='nonzero'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-size: 9px;
        background-position: left center;
        padding-left: 18px;
      }
      content: 'Show filters';
      font-size: rem-calc(18);
    }
  }
}
